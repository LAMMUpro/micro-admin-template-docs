# 派发组件

## 注册

注册一个 SvgIcon 图标组件(vue3), 该组件的原生用法只需要传入一个 name 属性, 值为图标名称

> 具体参数/方法看对应组件源码或文档

```TSX
// 主应用main.ts 初始化微前端时加入需要派发的组件
MicroAppInit({
  /** ...其它配置 */
  MicroComponentMap: {
    /** 注册SvgIcon组件 */
    SvgIcon: () => import('@/components/svg-icon/index.vue'), // 传入导入函数
    // SvgIcon: SvgIcon, // 也可以直接传一个组件过去
  },
});
```

## 用法

主应用注册的组件可以在任意子应用中使用, 目前已兼容 vue2/vue3/react

```TSX
import MicroComponent from 'micro-app-utils/react18/MicroComponent';

// _开头的属性是配置相关的, 用_is而不是is是为了兼容vue2, 同时考虑可能存在的重名问题
<MicroComponent _is="SvgIcon" name="private-svg"></MicroComponent>

// 派发组件在使用上可参考动态组件的写法
<component is="SvgIcon" name="private-svg"></component>
```

## 原理


## 注意事项

1. vue2使用MicroComponent 默认插槽时, 外层必须用`<template #default></template>`包裹, 否则响应式会丢失(原因未知)
2. 插槽用法不同框架之间有差异
  - react是通过属性来传递
3. 双向绑定
   1. vue3: v-model / v-model:show
   2. vue2: v-model / show.sync 或者 :modelValue + @update:modelValue / :show + @update:show
   3. react: modelValue + onUpdate:modelValue / show + onUpdate:show
   
